<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Planet Pizzaria</title>
    <link rel="stylesheet" href="styles.css" />
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <header class="header-details">
      <img
        src="./assets/pizza_calabresa.jpg"
        alt="Pizza de calabresa"
        class="image-item"
      />

      <div class="options-details">
        <a href="index.html">
          <div class="icon-option">
            <i class="bx bx-chevron-left"></i>
          </div>
        </a>

        <div class="right-option">
          <div class="icon-option">
            <i class="bx bx-search-alt-2"></i>
          </div>

          <div class="icon-option">
            <i class="bx bx-heart"></i>
          </div>
        </div>
      </div>
    </header>

    <main class="main-details">
      <h1 class="name-item">Calabresa Saturno</h1>

      <section class="info-details">
        <div class="item-raiting">
          <i class="bx bxs-star"></i>
          <i class="bx bxs-star"></i>
          <i class="bx bxs-star"></i>
          <i class="bx bxs-star"></i>
          <i class="bx bxs-star-half"></i>
          <p>4.5(2.5k)</p>
        </div>

        <div class="description-details"></div>

        <div class="galery-detail">
          <a href="#image01" class="galery-image">
            <img
              id="image-pizza1"
              src="./assets/pizza_calabresa.jpg"
              alt="Pizza Calabresa"
            />
          </a>

          <a href="#" class="lightbox" id="image01">
            <span style="background-image: url(./assets/pizza_calabresa.jpg)">
              <p>Experimente também a nossa Calabresa Saturno</p>
            </span>
          </a>

          <a href="#" class="lightbox" id="image02">
            <span style="background-image: url(./assets/pizza_de_frango.jpg)">
              <p>Experimente também a nossa Vênus Frango</p>
            </span>
          </a>

          <a href="#image02" class="galery-image">
            <img
              id="image-pizza2"
              src="./assets/pizza_de_frango.jpg"
              alt="Pizza Carne"
            />
          </a>
        </div>

        <div class="buy-item">
          <div>
            <button class="size-btn" data-size="P">P</button>
            <button class="size-btn" data-size="M">M</button>
            <button class="size-btn" data-size="G">G</button>
          </div>

          <p class="price-item">R$ <span id="price"></span></p>

          <a onclick="openOrderConfirm()" class="option-detail">Comprar Pizza <i class="bx bx-cart-add"></i></a>
        </div>
      </section>
    </main>

    <script>
     
      const sizeButtons = document.querySelectorAll(".size-btn");
      const priceElement = document.getElementById("price");
      
      

      // Pegando parâmetros da URL
      const urlParams = new URLSearchParams(window.location.search);
      const itemName = urlParams.get("name");
      const itemImage = urlParams.get("image");
      const priceP = parseFloat(urlParams.get("priceP")) || 0;
      const priceM = parseFloat(urlParams.get("priceM")) || 0;
      const priceG = parseFloat(urlParams.get("priceG")) || 0;
      const imagePizza1 = urlParams.get("pizza1");
      const imagePizza2 = urlParams.get("pizza2");
      const description = urlParams.get("description")

     
      // Definição da variável prices
      const prices = {
        P: priceP,
        M: priceM,
        G: priceG,
      };

      // Atualizando elementos da página
      const ImageElement1 = document.getElementById("image-pizza1")
      const ImageElement2 = document.getElementById("image-pizza2")
      const descriptionElement = document.querySelector(".description-details");
      const imageDetail = document.querySelector(".image-item");
      const nameDetail = document.querySelector(".name-item");

     

      // Atualizando nome e imagem da pizza
      nameDetail.textContent = itemName;
      imageDetail.src = "assets/" + itemImage;
      descriptionElement.textContent = description

     
      // Adicionando evento de clique nos botões de tamanho
      sizeButtons.forEach((button) => {
        button.addEventListener("click", function () {
          const selectedSize = this.getAttribute("data-size");

          // Verifica se o preço existe antes de atualizar o texto
          if (prices[selectedSize] !== undefined) {
            priceElement.textContent = prices[selectedSize].toFixed(2);
          }

          // Atualizando classes de botão ativo
          sizeButtons.forEach((btn) => btn.classList.remove("active"));
          this.classList.add("active");
        });
      });

      function openOrderConfirm(){
        window.open('confirm_order.html?name=' + itemName + '&image=' +itemImage,'_self');
      }
    </script>
  </body>
</html>
